## SQL数据过滤

### 比较运算符
在SQL中，我们可以使用`WHERE`子句对条件进行筛选，在此之前，你需要了解`WHERE`子句中的比较运算符。这些比较运算符的含义可以参见下面这张表格：
|含义|运算符|
|--|--|
|不等于|<>或!=|
|小于|<|
|小于等于（不大于）|<=或!>|
|大于等于（不小于）|>=或!<|
|在指定的两个数值之间|BETWEEN|
|为空值|IS NULL|

需要注意的是，在MySQL中，不支持（!>）（!<）等。

**WHERE子句的基本格式是：**
```
SELECT ...(列名) FROM ...(表名) WHERE ...(子句条件)

例如：
查询所有最大生命值在5399到6811之间的英雄
SELECT name FROM heros WHERE hp_max BETWEEN 5399 AND 6811

对heros表中的hp_max字段进行空值检查
SELECT name, hp_max FROM heros WHERE hp_max IS NULL
```

#### 逻辑运算符
刚刚介绍了比较运算符，如果我们存在多个WHERE条件子句，可以使用逻辑运算符：
|含义|逻辑运算符|
|--|--|
|并且|AND|
|或者|OR|
|在指定条件范围内|IN|
|非（否定）|NOT|

```
假设想要筛选最大生命值大于6000，最大法力大于1700的英雄，然后按照最大生命值和最大法力值之和从高到低进行排序
SELECT name FROM heros WHERE hp_max > 6000 AND mp_max > 1700 ORDER BY (hp_max+mp_max) DESC
```
另外需要注意到的是，当`WHERE`子句中同时存在`OR`和`AND`的时候，`AND`执行的优先级会更高，也就是SQL会优先处理`AND`操作符，然后再处理`OR`操作符。

#### 使用通配符进行过滤
上面讲的条件过滤都是对已知值进行的过滤，还有一种情况是我们要检索文本中包含某个词的所有数据，这里就需要使用通配符。通配符就是我们用来匹配值的一部分的特殊字符。这里我们需要使用到`LIKE`操作符。

如果我们想要匹配任意字符串出现的任意次数，需要使用（%）通配符。比如我们想要查找英雄名中包含“太”字的英雄都有哪些：
```
SELECT name FROM heros WHERE name LIKE '%太%'
```
如果我们想要匹配单个字符，就需要使用下划线`(_)`通配符。`(%)`和`(_)`的区别在于，(%)代表零个或多个字符，而(_)只代表一个字符。比如我们想要查找英雄名除了第一个字以外，包含'太'字的英雄有哪些。
```
SELECT name FROM heros WHERE name LIKE '_%太%`
```

虽然通配符很有用，尤其是在进行字符串匹配的时候。不过在实际操作过程中，还是建议尽量少用通配符，因为它需要消耗数据库更长的时间来进行匹配。即使对LIKE检索的字段进行了索引，索引的价值也可能会失效。如果要让索引生效，那么`LIKE`后面就不能以`(%)`开头，比如使用`LIKE '%太%'或LIKE '%太'`的时候就会对全表进行扫描。如果使用`LIKE '太%'`，同时检索的字段进行了索引的时候，则不会进行全表扫描。